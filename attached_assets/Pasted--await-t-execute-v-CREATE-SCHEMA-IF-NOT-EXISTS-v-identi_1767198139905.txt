		`;await t.execute(v`CREATE SCHEMA IF NOT EXISTS ${v.identifier(a)}`),await t.execute(s);let c=(await t.all(v`select id, hash, created_at from ${v.identifier(a)}.${v.identifier(r)} order by created_at desc limit 1`))[0];await t.transaction(async p=>{for await(let l of e)if(!c||Number(c.created_at)<l.folderMillis){for(let u of l.sql)await p.execute(v.raw(u));await p.execute(v`insert into ${v.identifier(a)}.${v.identifier(r)} ("hash", "created_at") values(${l.hash}, ${l.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[v`with `];for(let[n,r]of e.entries())t.push(v`${v.identifier(r._.alias)} as (${r._.sql})`),n<e.length-1&&t.push(v`, `);return t.push(v` `),v.join(t)}buildDeleteQuery({table:e,where:t,returning:n,withList:r}){let a=this.buildWithCTE(r),s=n?v` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,o=t?v` where ${t}`:void 0;return v`${a}delete from ${e}${o}${s}`}buildUpdateSet(e,t){let n=e[T.Symbol.Columns],r=Object.keys(n).filter(s=>t[s]!==void 0||n[s]?.onUpdateFn!==void 0),a=r.length;return v.join(r.flatMap((s,o)=>{let c=n[s],p=t[s]??v.param(c.onUpdateFn(),c),l=v`${v.identifier(this.casing.getColumnCasing(c))} = ${p}`;return o<a-1?[l,v.raw(", ")]:[l]}))}buildUpdateQuery({table:e,set:t,where:n,returning:r,withList:a,from:s,joins:o}){let c=this.buildWithCTE(a),p=e[Ae.Symbol.Name],l=e[Ae.Symbol.Schema],u=e[Ae.Symbol.OriginalName],d=p===u?void 0:p,f=v`${l?v`${v.identifier(l)}.`:void 0}${v.identifier(u)}${d&&v` ${v.identifier(d)}`}`,m=this.buildUpdateSet(e,t),g=s&&v.join([v.raw(" from "),this.buildFromTable(s)]),y=this.buildJoins(o),_=r?v` returning ${this.buildSelection(r,{isSingleTable:!s})}`:void 0,N=n?v` where ${n}`:void 0;return v`${c}update ${f} set ${m}${g}${y}${N}${_}`}buildSelection(e,{isSingleTable:t=!1}={}){let n=e.length,r=e.flatMap(({field:a},s)=>{let o=[];if(b(a,A.Aliased)&&a.isSelectionField)o.push(v.identifier(a.fieldAlias));else if(b(a,A.Aliased)||b(a,A)){let c=b(a,A.Aliased)?a.sql:a;t?o.push(new A(c.queryChunks.map(p=>b(p,S)?v.identifier(this.casing.getColumnCasing(p)):p))):o.push(c),b(a,A.Aliased)&&o.push(v` as ${v.identifier(a.fieldAlias)}`)}else b(a,K)&&(t?o.push(v.identifier(this.casing.getColumnCasing(a))):o.push(a));return s<n-1&&o.push(v`, `),o});return v.join(r)}buildJoins(e){if(!e||e.length===0)return;let t=[];for(let[n,r]of e.entries()){n===0&&t.push(v` `);let a=r.table,s=r.lateral?v` lateral`:void 0;if(b(a,Ae)){let o=a[Ae.Symbol.Name],c=a[Ae.Symbol.Schema],p=a[Ae.Symbol.OriginalName],l=o===p?void 0:r.alias;t.push(v`${v.raw(r.joinType)} join${s} ${c?v`${v.identifier(c)}.`:void 0}${v.identifier(p)}${l&&v` ${v.identifier(l)}`} on ${r.on}`)}else if(b(a,He)){let o=a[re].name,c=a[re].schema,p=a[re].originalName,l=o===p?void 0:r.alias;t.push(v`${v.raw(r.joinType)} join${s} ${c?v`${v.identifier(c)}.`:void 0}${v.identifier(p)}${l&&v` ${v.identifier(l)}`} on ${r.on}`)}else t.push(v`${v.raw(r.joinType)} join${s} ${a} on ${r.on}`);n<e.length-1&&t.push(v` `)}return v.join(t)}buildFromTable(e){if(b(e,T)&&e[T.Symbol.OriginalName]!==e[T.Symbol.Name]){let t=v`${v.identifier(e[T.Symbol.OriginalName])}`;return e[T.Symbol.Schema]&&(t=v`${v.identifier(e[T.Symbol.Schema])}.${t}`),v`${t} ${v.identifier(e[T.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:t,fieldsFlat:n,where:r,having:a,table:s,joins:o,orderBy:c,groupBy:p,limit:l,offset:u,lockingClause:d,distinct:f,setOperators:m}){let g=n??dt(t);for(let ue of g)if(b(ue.field,K)&&Xe(ue.field.table)!==(b(s,xe)?s._.alias:b(s,Zn)?s[re].name:b(s,A)?void 0:Xe(s))&&!(_e=>o?.some(({alias:Qt})=>Qt===(_e[T.Symbol.IsAlias]?Xe(_e):_e[T.Symbol.BaseName])))(ue.field.table)){let _e=Xe(ue.field.table);throw new Error(`Your "${ue.path.join("->")}" field references a column "${_e}"."${ue.field.name}", but the table "${_e}" is not part of the query! Did you forget to join it?`)}let y=!o||o.length===0,_=this.buildWithCTE(e),N;f&&(N=f===!0?v` distinct`:v` distinct on (${v.join(f.on,v`, `)})`);let E=this.buildSelection(g,{isSingleTable:y}),I=this.buildFromTable(s),F=this.buildJoins(o),D=r?v` where ${r}`:void 0,q=a?v` having ${a}`:void 0,B;c&&c.length>0&&(B=v` order by ${v.join(c,v`, `)}`);let te;p&&p.length>0&&(te=v` group by ${v.join(p,v`, `)}`);let qe=typeof l=="object"||typeof l=="number"&&l>=0?v` limit ${l}`:void 0,xt=u?v` offset ${u}`:void 0,rt=v.empty();if(d){let ue=v` for ${v.raw(d.strength)}`;d.config.of&&ue.append(v` of ${v.join(Array.isArray(d.config.of)?d.config.of:[d.config.of],v`, `)}`),d.config.noWait?ue.append(v` no wait`):d.config.skipLocked&&ue.append(v` skip locked`),rt.append(ue)}let ve=v`${_}select${N} ${E} from ${I}${F}${D}${te}${q}${B}${qe}${xt}${rt}`;return m.length>0?this.buildSetOperations(ve,m):ve}buildSetOperations(e,t){let[n,...r]=t;if(!n)throw new Error("Cannot pass undefined values to any set operator");return r.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:n}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:n}),r)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:n,rightSelect:r,limit:a,orderBy:s,offset:o}}){let c=v`(${e.getSQL()}) `,p=v`(${r.getSQL()})`,l;if(s&&s.length>0){let m=[];for(let g of s)if(b(g,S))m.push(v.identifier(g.name));else if(b(g,A)){for(let y=0;y<g.queryChunks.length;y++){let _=g.queryChunks[y];b(_,S)&&(g.queryChunks[y]=v.identifier(_.name))}m.push(v`${g}`)}else m.push(v`${g}`);l=v` order by ${v.join(m,v`, `)} `}let u=typeof a=="object"||typeof a=="number"&&a>=0?v` limit ${a}`:void 0,d=v.raw(`${t} ${n?"all ":""}`),f=o?v` offset ${o}`:void 0;return v`${c}${d}${p}${l}${u}${f}`}buildInsertQuery({table:e,values:t,onConflict:n,returning:r,withList:a,select:s,overridingSystemValue_:o}){let c=[],p=e[T.Symbol.Columns],l=Object.entries(p).filter(([_,N])=>!N.shouldDisableInsert()),u=l.map(([,_])=>v.identifier(this.casing.getColumnCasing(_)));if(s){let _=t;b(_,A)?c.push(_):c.push(_.getSQL())}else{let _=t;c.push(v.raw("values "));for(let[N,E]of _.entries()){let I=[];for(let[F,D]of l){let q=E[F];if(q===void 0||b(q,Je)&&q.value===void 0)if(D.defaultFn!==void 0){let B=D.defaultFn(),te=b(B,A)?B:v.param(B,D);I.push(te)}else if(!D.default&&D.onUpdateFn!==void 0){let B=D.onUpdateFn(),te=b(B,A)?B:v.param(B,D);I.push(te)}else I.push(v`default`);else I.push(q)}c.push(I),N<_.length-1&&c.push(v`, `)}}let d=this.buildWithCTE(a),f=v.join(c),m=r?v` returning ${this.buildSelection(r,{isSingleTable:!0})}`:void 0,g=n?v` on conflict ${n}`:void 0,y=o===!0?v`overriding system value `:void 0;return v`${d}insert into ${e} ${u} ${y}${f}${g}${m}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:n}){let r=t?v` concurrently`:void 0,a=n?v` with no data`:void 0;return v`refresh materialized view${r} ${e}${a}`}prepareTyping(e){return b(e,ya)||b(e,xa)?"json":b(e,ba)?"decimal":b(e,wa)?"time":b(e,_a)||b(e,Sa)?"timestamp":b(e,va)||b(e,ga)?"date":b(e,Ea)?"uuid":"none"}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:r,tableConfig:a,queryConfig:s,tableAlias:o,nestedQueryRelation:c,joinOn:p}){let l=[],u,d,f=[],m,g=[];if(s===!0)l=Object.entries(a.columns).map(([N,E])=>({dbKey:E.name,tsKey:N,field:Rt(E,o),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let _=Object.fromEntries(Object.entries(a.columns).map(([q,B])=>[q,Rt(B,o)]));if(s.where){let q=typeof s.where=="function"?s.where(_,yw()):s.where;m=q&&da(q,o)}let N=[],E=[];if(s.columns){let q=!1;for(let[B,te]of Object.entries(s.columns))te!==void 0&&B in a.columns&&(!q&&te===!0&&(q=!0),E.push(B));E.length>0&&(E=q?E.filter(B=>s.columns?.[B]===!0):Object.keys(a.columns).filter(B=>!E.includes(B)))}else E=Object.keys(a.columns);for(let q of E){let B=a.columns[q];N.push({tsKey:q,value:B})}let I=[];s.with&&(I=Object.entries(s.with).filter(q=>!!q[1]).map(([q,B])=>({tsKey:q,queryConfig:B,relation:a.relations[q]})));let F;if(s.extras){F=typeof s.extras=="function"?s.extras(_,{sql:v}):s.extras;for(let[q,B]of Object.entries(F))N.push({tsKey:q,value:Rl(B,o)})}for(let{tsKey:q,value:B}of N)l.push({dbKey:b(B,A.Aliased)?B.fieldAlias:a.columns[q].name,tsKey:q,field:b(B,K)?Rt(B,o):B,relationTableTsKey:void 0,isJson:!1,selection:[]});let D=typeof s.orderBy=="function"?s.orderBy(_,bw()):s.orderBy??[];Array.isArray(D)||(D=[D]),f=D.map(q=>b(q,K)?Rt(q,o):da(q,o)),u=s.limit,d=s.offset;for(let{tsKey:q,queryConfig:B,relation:te}of I){let qe=_w(t,n,te),xt=Ui(te.referencedTable),rt=n[xt],ve=`${o}_${q}`,ue=zt(...qe.fields.map((xr,pc)=>V(Rt(qe.references[pc],ve),Rt(xr,o)))),_e=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:e[rt],tableConfig:t[rt],queryConfig:b(te,yi)?B===!0?{limit:1}:{...B,limit:1}:B,tableAlias:ve,joinOn:ue,nestedQueryRelation:te}),Qt=v`${v.identifier(ve)}.${v.identifier("data")}`.as(q);g.push({on:v`true`,table:new xe(_e.sql,{},ve),alias:ve,joinType:"left",lateral:!0}),l.push({dbKey:q,tsKey:q,field:Qt,relationTableTsKey:rt,isJson:!0,selection:_e.selection})}}if(l.length===0)throw new ha({message:`No fields selected for table "${a.tsName}" ("${o}")`});let y;if(m=zt(p,m),c){let _=v`json_build_array(${v.join(l.map(({field:I,tsKey:F,isJson:D})=>D?v`${v.identifier(`${o}_${F}`)}.${v.identifier("data")}`:b(I,A.Aliased)?I.sql:I),v`, `)})`;b(c,ka)&&(_=v`coalesce(json_agg(${_}${f.length>0?v` order by ${v.join(f,v`, `)}`:void 0}), '[]'::json)`);let N=[{dbKey:"data",tsKey:"data",field:_.as("data"),isJson:!0,relationTableTsKey:a.tsName,selection:l}];u!==void 0||d!==void 0||f.length>0?(y=this.buildSelectQuery({table:ua(r,o),fields:{},fieldsFlat:[{path:[],field:v.raw("*")}],where:m,limit:u,offset:d,orderBy:f,setOperators:[]}),m=void 0,u=void 0,d=void 0,f=[]):y=ua(r,o),y=this.buildSelectQuery({table:b(y,Ae)?y:new xe(y,{},o),fields:{},fieldsFlat:N.map(({field:I})=>({path:[],field:b(I,K)?Rt(I,o):I})),joins:g,where:m,limit:u,offset:d,orderBy:f,setOperators:[]})}else y=this.buildSelectQuery({table:ua(r,o),fields:{},fieldsFlat:l.map(({field:_})=>({path:[],field:b(_,K)?Rt(_,o):_})),joins:g,where:m,limit:u,offset:d,orderBy:f,setOperators:[]});return{tableTsKey:a.tsName,sql:y,selection:l}}};var So=class{static[h]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var Re=class{static[h]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let t=!!this.fields,n=e,r;return this.fields?r=this.fields:b(n,xe)?r=Object.fromEntries(Object.keys(n._.selectedFields).map(a=>[a,n[a]])):b(n,Zn)?r=n[re].selectedFields:b(n,A)?r={}:r=vo(n),new Eo({table:n,fields:r,isPartialSelect:t,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},nd=class extends So{static[h]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:e,fields:t,isPartialSelect:n,session:r,dialect:a,withList:s,distinct:o}){super(),this.config={withList:s,table:e,fields:{...t},distinct:o,setOperators:[]},this.isPartialSelect=n,this.session=r,this.dialect=a,this._={selectedFields:t},this.tableName=Kt(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(e){return(t,n)=>{let r=this.tableName,a=Kt(t);if(typeof a=="string"&&this.config.joins?.some(s=>s.alias===a))throw new Error(`Alias "${a}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof r=="string"&&(this.config.fields={[r]:this.config.fields}),typeof a=="string"&&!b(t,A))){let s=b(t,xe)?t._.selectedFields:b(t,He)?t[re].selectedFields:t[T.Symbol.Columns];this.config.fields[a]=s}if(typeof n=="function"&&(n=n(new Proxy(this.config.fields,new me({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:n,table:t,joinType:e,alias:a}),typeof a=="string")switch(e){case"left":{this.joinsNotNullableMap[a]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([s])=>[s,!1])),this.joinsNotNullableMap[a]=!0;break}case"inner":{this.joinsNotNullableMap[a]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([s])=>[s,!1])),this.joinsNotNullableMap[a]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(e,t){return n=>{let r=typeof n=="function"?n(JP()):n;if(!fa(this.getSelectedFields(),r.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:r}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new me({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new me({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new me({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new me({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),n=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}else{let t=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=t:this.config.orderBy=t}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){return new Proxy(new xe(this.getSQL(),this.config.fields,e),new me({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new me({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}},Eo=class extends nd{static[h]="PgSelect";_prepare(e){let{session:t,config:n,dialect:r,joinsNotNullableMap:a,authToken:s}=this;if(!t)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");return ye.startActiveSpan("drizzle.prepareQuery",()=>{let o=dt(n.fields),c=t.prepareQuery(r.sqlToQuery(this.getSQL()),o,e,!0);return c.joinsNotNullableMap=a,c.setToken(s)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>ye.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};w0(Eo,[Le]);function Xn(i,e){return(t,n,...r)=>{let a=[n,...r].map(s=>({type:i,isAll:e,rightSelect:s}));for(let s of a)if(!fa(t.getSelectedFields(),s.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return t.addSetOperators(a)}}var JP=()=>({union:YP,unionAll:eN,intersect:tN,intersectAll:iN,except:nN,exceptAll:rN}),YP=Xn("union",!1),eN=Xn("union",!0),tN=Xn("intersect",!1),iN=Xn("intersect",!0),nN=Xn("except",!1),rN=Xn("except",!0);var Jn=class{static[h]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=b(e,bi)?e:void 0,this.dialectConfig=b(e,bi)?void 0:e}$with=(e,t)=>{let n=this;return{as:a=>(typeof a=="function"&&(a=a(n)),new Proxy(new Wn(a.getSQL(),t??("getSelectedFields"in a?a.getSelectedFields()??{}:{}),e,!0),new me({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;function n(s){return new Re({fields:s??void 0,session:void 0,dialect:t.getDialect(),withList:e})}function r(s){return new Re({fields:s??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})}function a(s,o){return new Re({fields:o??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:s}})}return{select:n,selectDistinct:r,selectDistinctOn:a}}select(e){return new Re({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Re({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new Re({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new bi(this.dialectConfig)),this.dialect}};var Ta=class{constructor(e,t,n,r,a){this.table=e,this.session=t,this.dialect=n,this.withList=r,this.overridingSystemValue_=a}static[h]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let t=e.map(n=>{let r={},a=this.table[T.Symbol.Columns];for(let s of Object.keys(n)){let o=n[s];r[s]=b(o,A)?o:new Je(o,a[s])}return r});return new ko(this.table,t,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let t=typeof e=="function"?e(new Jn):e;if(!b(t,A)&&!fa(this.table[fo],t._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new ko(this.table,t,this.session,this.dialect,this.withList,!0)}},ko=class extends Le{constructor(e,t,n,r,a,s,o){super(),this.session=n,this.dialect=r,this.config={table:e,values:t,withList:a,select:s,overridingSystemValue_:o}}static[h]="PgInsert";config;returning(e=this.config.table[T.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=dt(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=v`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(r=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(r))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let n=e.where?v` where ${e.where}`:void 0;this.config.onConflict=v`(${v.raw(t)})${n} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let t=e.where?v` where ${e.where}`:void 0,n=e.targetWhere?v` where ${e.targetWhere}`:void 0,r=e.setWhere?v` where ${e.setWhere}`:void 0,a=this.dialect.buildUpdateSet(this.config.table,ho(this.config.table,e.set)),s="";return s=Array.isArray(e.target)?e.target.map(o=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(o))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=v`(${v.raw(s)})${n} do update set ${a}${t}${r}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return ye.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>ye.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new me({alias:Xe(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var To=class extends Le{constructor(e,t,n){super(),this.session=t,this.dialect=n,this.config={view:e}}static[h]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return ye.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>ye.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};var Ca=class{constructor(e,t,n,r){this.table=e,this.session=t,this.dialect=n,this.withList=r}static[h]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new rd(this.table,ho(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},rd=class extends Le{constructor(e,t,n,r,a){super(),this.session=n,this.dialect=r,this.config={set:t,table:e,withList:a,joins:[]},this.tableName=Kt(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[h]="PgUpdate";config;tableName;joinsNotNullableMap;from(e){let t=e,n=Kt(t);return typeof n=="string"&&(this.joinsNotNullableMap[n]=!0),this.config.from=t,this}getTableLikeFields(e){return b(e,Ae)?e[T.Symbol.Columns]:b(e,xe)?e._.selectedFields:e[re].selectedFields}createJoin(e){return(t,n)=>{let r=Kt(t);if(typeof r=="string"&&this.config.joins.some(a=>a.alias===r))throw new Error(`Alias "${r}" is already used in this query`);if(typeof n=="function"){let a=this.config.from&&!b(this.config.from,A)?this.getTableLikeFields(this.config.from):void 0;n=n(new Proxy(this.config.table[T.Symbol.Columns],new me({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new me({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:n,table:t,joinType:e,alias:r}),typeof r=="string")switch(e){case"left":{this.joinsNotNullableMap[r]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[r]=!0;break}case"inner":{this.joinsNotNullableMap[r]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[r]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[T.Symbol.Columns]),this.config.from)){let t=Kt(this.config.from);if(typeof t=="string"&&this.config.from&&!b(this.config.from,A)){let n=this.getTableLikeFields(this.config.from);e[t]=n}for(let n of this.config.joins){let r=Kt(n.table);if(typeof r=="string"&&!b(n.table,A)){let a=this.getTableLikeFields(n.table);e[r]=a}}}return this.config.returningFields=e,this.config.returning=dt(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){let t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new me({alias:Xe(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Co=class i extends A{constructor(e){super(i.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=i.buildCount(e.source,e.filters)}sql;token;static[h]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,t){return v`(select count(*) from ${e}${v.raw(" where ").if(t)}${t})`}static buildCount(e,t){return v`select count(*) as count from ${e}${v.raw(" where ").if(t)}${t};`}setToken(e){return this.token=e,this}then(e,t){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}};var Ao=class{constructor(e,t,n,r,a,s,o){this.fullSchema=e,this.schema=t,this.tableNamesMap=n,this.table=r,this.tableConfig=a,this.dialect=s,this.session=o}static[h]="PgRelationalQueryBuilder";findMany(e){return new Po(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new Po(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},Po=class extends Le{constructor(e,t,n,r,a,s,o,c,p){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=n,this.table=r,this.tableConfig=a,this.dialect=s,this.session=o,this.config=c,this.mode=p}static[h]="PgRelationalQuery";_prepare(e){return ye.startActiveSpan("drizzle.prepareQuery",()=>{let{query:t,builtQuery:n}=this._toSQL();return this.session.prepareQuery(n,void 0,e,!0,(r,a)=>{let s=r.map(o=>_o(this.schema,this.tableConfig,o,t.selection,a));return this.mode==="first"?s[0]:s})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return ye.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var No=class extends Le{constructor(e,t,n,r){super(),this.execute=e,this.sql=t,this.query=n,this.mapBatchResult=r}static[h]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};var Yn=class{constructor(e,t,n){if(this.dialect=e,this.session=t,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:t},this.query={},this._.schema)for(let[r,a]of Object.entries(this._.schema))this.query[r]=new Ao(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[r],a,e,t)}static[h]="PgDatabase";query;$with=(e,t)=>{let n=this;return{as:a=>(typeof a=="function"&&(a=a(new Jn(n.dialect))),new Proxy(new Wn(a.getSQL(),t??("getSelectedFields"in a?a.getSelectedFields()??{}:{}),e,!0),new me({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new Co({source:e,filters:t,session:this.session})}with(...e){let t=this;function n(p){return new Re({fields:p??void 0,session:t.session,dialect:t.dialect,withList:e})}function r(p){return new Re({fields:p??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})}function a(p,l){return new Re({fields:l??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:p}})}function s(p){return new Ca(p,t.session,t.dialect,e)}function o(p){return new Ta(p,t.session,t.dialect,e)}function c(p){return new ma(p,t.session,t.dialect,e)}return{select:n,selectDistinct:r,selectDistinctOn:a,update:s,insert:o,delete:c}}select(e){return new Re({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Re({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new Re({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new Ca(e,this.session,this.dialect)}insert(e){return new Ta(e,this.session,this.dialect)}delete(e){return new ma(e,this.session,this.dialect)}refreshMaterializedView(e){return new To(e,this.session,this.dialect)}authToken;execute(e){let t=typeof e=="string"?v.raw(e):e.getSQL(),n=this.dialect.sqlToQuery(t),r=this.session.prepareQuery(n,void 0,void 0,!1);return new No(()=>r.execute(void 0,this.authToken),t,n,a=>r.mapResult(a,!0))}transaction(e,t){return this.session.transaction(e,t)}};var tt=require("@neondatabase/serverless");var jo=class{constructor(e){this.query=e}authToken;getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}static[h]="PgPreparedQuery";joinsNotNullableMap},qo=class{constructor(e){this.dialect=e}static[h]="PgSession";execute(e,t){return ye.startActiveSpan("drizzle.operation",()=>ye.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){let n=await this.execute(e,t);return Number(n[0].count)}},Oo=class extends Yn{constructor(e,t,n,r=0){super(e,t,n),this.schema=n,this.nestedIndex=r}static[h]="PgTransaction";rollback(){throw new xo}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),typeof e.deferrable=="boolean"&&t.push(e.deferrable?"deferrable":"not deferrable"),v.raw(t.join(" "))}setTransaction(e){return this.session.execute(v`set transaction ${this.getTransactionConfigSQL(e)}`)}};var ad=class extends jo{constructor(e,t,n,r,a,s,o,c){super({sql:t,params:n}),this.client=e,this.params=n,this.logger=r,this.fields=a,this._isResponseInArrayMode=o,this.customResultMapper=c,this.rawQueryConfig={name:s,text:t,types:{getTypeParser:(p,l)=>p===tt.types.builtins.TIMESTAMPTZ?u=>u:p===tt.types.builtins.TIMESTAMP?u=>u:p===tt.types.builtins.DATE?u=>u:p===tt.types.builtins.INTERVAL?u=>u:tt.types.getTypeParser(p,l)}},this.queryConfig={name:s,text:t,rowMode:"array",types:{getTypeParser:(p,l)=>p===tt.types.builtins.TIMESTAMPTZ?u=>u:p===tt.types.builtins.TIMESTAMP?u=>u:p===tt.types.builtins.DATE?u=>u:p===tt.types.builtins.INTERVAL?u=>u:tt.types.getTypeParser(p,l)}}}static[h]="NeonPreparedQuery";rawQueryConfig;queryConfig;async execute(e={}){let t=mo(this.params,e);this.logger.logQuery(this.rawQueryConfig.text,t);let{fields:n,client:r,rawQueryConfig:a,queryConfig:s,joinsNotNullableMap:o,customResultMapper:c}=this;if(!n&&!c)return r.query(a,t);let p=await r.query(s,t);return c?c(p.rows):p.rows.map(l=>b0(n,l,o))}all(e={}){let t=mo(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,t),this.client.query(this.rawQueryConfig,t).then(n=>n.rows)}values(e={}){let t=mo(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,t),this.client.query(this.queryConfig,t).then(n=>n.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},Io=class i extends qo{constructor(e,t,n,r={}){super(t),this.client=e,this.schema=n,this.options=r,this.logger=r.logger??new oo}static[h]="NeonSession";logger;prepareQuery(e,t,n,r,a){return new ad(this.client,e.sql,e.params,this.logger,t,n,r,a)}async query(e,t){return this.logger.logQuery(e,t),await this.client.query({rowMode:"array",text:e,values:t})}async queryObjects(e,t){return this.client.query(e,t)}async count(e){let t=await this.execute(e);return Number(t.rows[0].count)}async transaction(e,t={}){let n=this.client instanceof tt.Pool?new i(await this.client.connect(),this.dialect,this.schema,this.options):this,r=new sd(this.dialect,n,this.schema);await r.execute(v`begin ${r.getTransactionConfigSQL(t)}`);try{let a=await e(r);return await r.execute(v`commit`),a}catch(a){throw await r.execute(v`rollback`),a}finally{this.client instanceof tt.Pool&&n.client.release()}}},sd=class i extends Oo{static[h]="NeonTransaction";async transaction(e){let t=`sp${this.nestedIndex+1}`,n=new i(this.dialect,this.session,this.schema,this.nestedIndex+1);await n.execute(v.raw(`savepoint ${t}`));try{let r=await e(n);return await n.execute(v.raw(`release savepoint ${t}`)),r}catch(r){throw await n.execute(v.raw(`rollback to savepoint ${t}`)),r}}};var od=class{constructor(e,t,n={}){this.client=e,this.dialect=t,this.options=n}static[h]="NeonDriver";createSession(e){return new Io(this.client,this.dialect,e,{logger:this.options.logger})}},cd=class extends Yn{static[h]="NeonServerlessDatabase"};function Aa(i,e={}){let t=new bi({casing:e.casing}),n;e.logger===!0?n=new so:e.logger!==!1&&(n=e.logger);let r;if(e.schema){let c=ww(e.schema,Sw);r={fullSchema:e.schema,schema:c.tables,tableNamesMap:c.tableNamesMap}}let s=new od(i,t,{logger:n}).createSession(r),o=new cd(t,s,r);return o.$client=i,o}function Lo(...i){if(typeof i[0]=="string"){let e=new er.Pool({connectionString:i[0]});return Aa(e,i[1])}if(S0(i[0])){let{connection:e,client:t,ws:n,...r}=i[0];if(n&&(er.neonConfig.webSocketConstructor=n),t)return Aa(t,r);let a=typeof e=="string"?new er.Pool({connectionString:e}):new er.Pool(e);return Aa(a,r)}return Aa(i[0],i[1])}(i=>{function e(t){return Aa({},t)}i.mock=e})(Lo||(Lo={}));var jj=At(Cw(),1),qj=At(Cd(),1),Oj=At(Nd(),1),G1=At(Bd(),1),Ij=At(W1(),1);var K1=G1.default;var Gd={};Qf(Gd,{ListingStatus:()=>eO,ListingType:()=>Jq,PropertyType:()=>Yq,UserRole:()=>Xq,completeProfileSchema:()=>Qd,createAdminSchema:()=>Wd,favorites:()=>gt,inquiries:()=>ze,inquiryFormSchema:()=>oO,insertFavoriteSchema:()=>aO,insertInquirySchema:()=>rO,insertOtpTokenSchema:()=>iO,insertPropertySchema:()=>nO,insertUserSchema:()=>tO,otpTokens:()=>Ne,properties:()=>ae,propertyFormSchema:()=>sO,requestOtpSchema:()=>Hd,users:()=>Oe,verifyOtpSchema:()=>Vd});var W;(function(i){i.assertEqual=r=>r;function e(r){}i.assertIs=e;function t(r){throw new Error}i.assertNever=t,i.arrayToEnum=r=>{let a={};for(let s of r)a[s]=s;return a},i.getValidEnumValues=r=>{let a=i.objectKeys(r).filter(o=>typeof r[r[o]]!="number"),s={};for(let o of a)s[o]=r[o];return i.objectValues(s)},i.objectValues=r=>i.objectKeys(r).map(function(a){return r[a]}),i.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{let a=[];for(let s in r)Object.prototype.hasOwnProperty.call(r,s)&&a.push(s);return a},i.find=(r,a)=>{for(let s of r)if(a(s))return s},i.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function n(r,a=" | "){return r.map(s=>typeof s=="string"?`'${s}'`:s).join(a)}i.joinValues=n,i.jsonStringifyReplacer=(r,a)=>typeof a=="bigint"?a.toString():a})(W||(W={}));var Dd;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(Dd||(Dd={}));var C=W.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),si=i=>{switch(typeof i){case"undefined":return C.undefined;case"string":return C.string;case"number":return isNaN(i)?C.nan:C.number;case"boolean":return C.boolean;case"function":return C.function;case"bigint":return C.bigint;case"symbol":return C.symbol;case"object":return Array.isArray(i)?C.array:i===null?C.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?C.promise:typeof Map<"u"&&i instanceof Map?C.map:typeof Set<"u"&&i instanceof Set?C.set:typeof Date<"u"&&i instanceof Date?C.date:C.object;default:return C.unknown}},w=W.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Lj=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:"),ot=class i extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(a){return a.message},n={_errors:[]},r=a=>{for(let s of a.issues)if(s.code==="invalid_union")s.unionErrors.map(r);else if(s.code==="invalid_return_type")r(s.returnTypeError);else if(s.code==="invalid_arguments")r(s.argumentsError);else if(s.path.length===0)n._errors.push(t(s));else{let o=n,c=0;for(;c<s.path.length;){let p=s.path[c];c===s.path.length-1?(o[p]=o[p]||{_errors:[]},o[p]._errors.push(t(s))):o[p]=o[p]||{_errors:[]},o=o[p],c++}}};return r(this),n}static assert(e){if(!(e instanceof i))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,W.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};ot.create=i=>new ot(i);var cr=(i,e)=>{let t;switch(i.code){case w.invalid_type:i.received===C.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case w.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,W.jsonStringifyReplacer)}`;break;case w.unrecognized_keys:t=`Unrecognized key(s) in object: ${W.joinValues(i.keys,", ")}`;break;case w.invalid_union:t="Invalid input";break;case w.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${W.joinValues(i.options)}`;break;case w.invalid_enum_value:t=`Invalid enum value. Expected ${W.joinValues(i.options)}, received '${i.received}'`;break;case w.invalid_arguments:t="Invalid function arguments";break;case w.invalid_return_type:t="Invalid function return type";break;case w.invalid_date:t="Invalid date";break;case w.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:W.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case w.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case w.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case w.custom:t="Invalid input";break;case w.invalid_intersection_types:t="Intersection results could not be merged";break;case w.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case w.not_finite:t="Number must be finite";break;default:t=e.defaultError,W.assertNever(i)}return{message:t}},Y1=cr;function Rj(i){Y1=i}function Ko(){return Y1}var Zo=i=>{let{data:e,path:t,errorMaps:n,issueData:r}=i,a=[...t,...r.path||[]],s={...r,path:a};if(r.message!==void 0)return{...r,path:a,message:r.message};let o="",c=n.filter(p=>!!p).slice().reverse();for(let p of c)o=p(s,{data:e,defaultError:o}).message;return{...r,path:a,message:o}},Bj=[];function k(i,e){let t=Ko(),n=Zo({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===cr?void 0:cr].filter(r=>!!r)});i.common.issues.push(n)}var Be=class i{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let r of t){if(r.status==="aborted")return R;r.status==="dirty"&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let r of t){let a=await r.key,s=await r.value;n.push({key:a,value:s})}return i.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let r of t){let{key:a,value:s}=r;if(a.status==="aborted"||s.status==="aborted")return R;a.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof s.value<"u"||r.alwaysSet)&&(n[a.value]=s.value)}return{status:e.value,value:n}}},R=Object.freeze({status:"aborted"}),or=i=>({status:"dirty",value:i}),Ve=i=>({status:"valid",value:i}),Fd=i=>i.status==="aborted",Ud=i=>i.status==="dirty",Ki=i=>i.status==="valid",Da=i=>typeof Promise<"u"&&i instanceof Promise;function Xo(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)}function e_(i,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t}var j;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e?.message})(j||(j={}));var za,Ma,vt=class{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Z1=(i,e)=>{if(Ki(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new ot(i.common.issues);return this._error=t,this._error}}};function z(i){if(!i)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:r}=i;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(s,o)=>{var c,p;let{message:l}=i;return s.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:(c=l??n)!==null&&c!==void 0?c:o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:(p=l??t)!==null&&p!==void 0?p:o.defaultError}},description:r}}var M=class{get description(){return this._def.description}_getType(e){return si(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:si(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Be,ctx:{common:e.parent.common,data:e.data,parsedType:si(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(Da(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let r={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:si(e)},a=this._parseSync({data:e,path:r.path,parent:r});return Z1(r,a)}"~validate"(e){var t,n;let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:si(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:r});return Ki(a)?{value:a.value}:{issues:r.common.issues}}catch(a){!((n=(t=a?.message)===null||t===void 0?void 0:t.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>Ki(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:si(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(Da(r)?r:Promise.resolve(r));return Z1(n,a)}refine(e,t){let n=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,a)=>{let s=e(r),o=()=>a.addIssue({code:w.custom,...n(r)});return typeof Promise<"u"&&s instanceof Promise?s.then(c=>c?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,r)=>e(n)?!0:(r.addIssue(typeof t=="function"?t(n,r):t),!1))}_refinement(e){return new ct({schema:this,typeName:L.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ht.create(this,this._def)}nullable(){return Ut.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ci.create(this)}promise(){return ki.create(this,this._def)}or(e){return nn.create([this,e],this._def)}and(e){return rn.create(this,e,this._def)}transform(e){return new ct({...z(this._def),schema:this,typeName:L.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new pn({...z(this._def),innerType:this,defaultValue:t,typeName:L.ZodDefault})}brand(){return new Fa({typeName:L.ZodBranded,type:this,...z(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new ln({...z(this._def),innerType:this,catchValue:t,typeName:L.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Ua.create(this,e)}readonly(){return un.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},zj=/^c[^\s-]{8,}$/i,Mj=/^[0-9a-z]+$/,Dj=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Fj=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Uj=/^[a-z0-9_-]{21}$/i,$j=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Hj=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Vj=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Qj="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Md,Wj=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Gj=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Kj=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Zj=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Xj=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Jj=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,t_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Yj=new RegExp(`^${t_}$`);function i_(i){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`),e}function eq(i){return new RegExp(`^${i_(i)}$`)}function n_(i){let e=`${t_}T${i_(i)}`,t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function tq(i,e){return!!((e==="v4"||!e)&&Wj.test(i)||(e==="v6"||!e)&&Kj.test(i))}function iq(i,e){if(!$j.test(i))return!1;try{let[t]=i.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(n));return!(typeof r!="object"||r===null||!r.typ||!r.alg||e&&r.alg!==e)}catch{return!1}}function nq(i,e){return!!((e==="v4"||!e)&&Gj.test(i)||(e==="v6"||!e)&&Zj.test(i))}var Si=class i extends M{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==C.string){let a=this._getOrReturnCtx(e);return k(a,{code:w.invalid_type,expected:C.string,received:a.parsedType}),R}let n=new Be,r;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),k(r,{code:w.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),k(r,{code:w.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){let s=e.data.length>a.value,o=e.data.length<a.value;(s||o)&&(r=this._getOrReturnCtx(e,r),s?k(r,{code:w.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&k(r,{code:w.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Vj.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"email",code:w.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Md||(Md=new RegExp(Qj,"u")),Md.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"emoji",code:w.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Fj.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"uuid",code:w.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")Uj.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"nanoid",code:w.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")zj.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"cuid",code:w.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Mj.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"cuid2",code:w.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Dj.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"ulid",code:w.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),k(r,{validation:"url",code:w.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"regex",code:w.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),k(r,{code:w.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),k(r,{code:w.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),k(r,{code:w.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?n_(a).test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{code:w.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?Yj.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{code:w.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?eq(a).test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{code:w.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?Hj.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"duration",code:w.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?tq(e.data,a.version)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"ip",code:w.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?iq(e.data,a.alg)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"jwt",code:w.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?nq(e.data,a.version)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"cidr",code:w.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?Xj.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"base64",code:w.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?Jj.test(e.data)||(r=this._getOrReturnCtx(e,r),k(r,{validation:"base64url",code:w.invalid_string,message:a.message}),n.dirty()):W.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(r=>e.test(r),{validation:t,code:w.invalid_string,...j.errToObj(n)})}_addCheck(e){return new i({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...j.errToObj(e)})}url(e){return this._addCheck({kind:"url",...j.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...j.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...j.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...j.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...j.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...j.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...j.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...j.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...j.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...j.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...j.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...j.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...j.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...j.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...j.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...j.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...j.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...j.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...j.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...j.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...j.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...j.errToObj(t)})}nonempty(e){return this.min(1,j.errToObj(e))}trim(){return new i({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new i({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new i({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Si.create=i=>{var e;return new Si({checks:[],typeName:L.ZodString,coerce:(e=i?.coerce)!==null&&e!==void 0?e:!1,...z(i)})};function rq(i,e){let t=(i.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,r=t>n?t:n,a=parseInt(i.toFixed(r).replace(".","")),s=parseInt(e.toFixed(r).replace(".",""));return a%s/Math.pow(10,r)}var Zi=class i extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==C.number){let a=this._getOrReturnCtx(e);return k(a,{code:w.invalid_type,expected:C.number,received:a.parsedType}),R}let n,r=new Be;for(let a of this._def.checks)a.kind==="int"?W.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),k(n,{code:w.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:w.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:w.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="multipleOf"?rq(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),k(n,{code:w.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),k(n,{code:w.not_finite,message:a.message}),r.dirty()):W.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,j.toString(t))}gt(e,t){return this.setLimit("min",e,!1,j.toString(t))}lte(e,t){return this.setLimit("max",e,!0,j.toString(t))}lt(e,t){return this.setLimit("max",e,!1,j.toString(t))}setLimit(e,t,n,r){return new i({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:j.toString(r)}]})}_addCheck(e){return new i({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:j.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:j.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:j.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:j.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:j.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:j.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:j.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:j.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:j.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&W.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};Zi.create=i=>new Zi({checks:[],typeName:L.ZodNumber,coerce:i?.coerce||!1,...z(i)});var Xi=class i extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==C.bigint)return this._getInvalidInput(e);let n,r=new Be;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:w.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),k(n,{code:w.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),k(n,{code:w.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):W.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return k(t,{code:w.invalid_type,expected:C.bigint,received:t.parsedType}),R}gte(e,t){return this.setLimit("min",e,!0,j.toString(t))}gt(e,t){return this.setLimit("min",e,!1,j.toString(t))}lte(e,t){return this.setLimit("max",e,!0,j.toString(t))}lt(e,t){return this.setLimit("max",e,!1,j.toString(t))}setLimit(e,t,n,r){return new i({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:j.toString(r)}]})}_addCheck(e){return new i({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:j.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:j.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:j.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:j.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:j.toString(t)}npm warn config production Use `--omit=dev` instead.